C251 COMPILER V5.60.0,  IPS200_SPI                                                         08/03/24  19:26:53  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE IPS200_SPI
OBJECT MODULE PLACED IN .\Out_flie\IPS200_SPI.obj
COMPILER INVOKED BY: D:\Keil_80251\C251\BIN\C251.EXE ..\LIB\peripheral\IPS200_SPI.c XSMALL INTR2 BROWSE INCDIR(..\LIB\st
                    -artup;..\LIB\libraries;..\LIB\peripheral;..\USER\inc) DEBUG PRINT(.\Listings\IPS200_SPI.lst) TABS(2) OBJECT(.\Out_flie\I
                    -PS200_SPI.obj) 

stmt  level    source

    1          
    2          /********************************************************************************************************
             -*************
    3          * @file           OLEDæ˜¾ç¤ºå±IPS200_SPI
    4           * @date          2024-03-06
    5           * @note    
    6                    æ¥çº¿å®šä¹‰ï¼š
    7                    ------------------------------------ 
    8                    2.0å¯¸IPSæ¨¡å—ç®¡è„š       å•ç‰‡æœºç®¡è„š
    9                    SCL                   æŸ¥çœ‹IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_SCL    å®å®šä¹‰     ç¡¬ä»¶SPIå¼•è„šä¸å¯éš
             -æ„åˆ‡æ¢
   10                    SDA                   æŸ¥çœ‹IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_SDA    å®å®šä¹‰     ç¡¬ä»¶SPIå¼•è„šä¸å¯éš
             -æ„åˆ‡æ¢
   11                    RES                   æŸ¥çœ‹IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_RST_PIN å®å®šä¹‰    
   12                    DC                    æŸ¥çœ‹IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_DC_PIN å®å®šä¹‰  
   13                    CS                    æŸ¥çœ‹IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_CS   å®å®šä¹‰     ç¡¬ä»¶SPIå¼•è„šä¸å¯éš
             -æ„åˆ‡æ¢
   14                    BL                    æŸ¥çœ‹IPS200_SPI.hæ–‡ä»¶å†…çš„IPS200_BL_PIN å®å®šä¹‰
   15                    
   16                    ç”µæºå¼•è„š
   17                    VCC 3.3Vç”µæº
   18                    GND ç”µæºåœ°
   19                    æœ€å¤§åˆ†è¾¨ç‡320*240
   20                    ------------------------------------ 
   21           ********************************************************************************************************
             -************/
   22          
   23          
   24          #include "IPS200_SPI.h"
   25          #include "FONT.h"
   26          #include "FUNCTION.h"
   27          
   28          
   29          #include "spi.h"
   30          #include "delay.h"
   31          
   32          static uint16 ips200_pencolor = IPS200_DEFAULT_PENCOLOR;
   33          static uint16 ips200_bgcolor  = IPS200_DEFAULT_BGCOLOR;
   34          
   35          static ips200_type_enum         ips200_display_type = IPS200_TYPE_SPI;
   36          static ips200_dir_enum          ips200_display_dir  = IPS200_DEFAULT_DISPLAY_DIR;
   37          static ips200_font_size_enum    ips200_display_font = IPS200_DEFAULT_DISPLAY_FONT;
   38          
   39          static uint16 ips200_x_max = 240;
   40          static uint16 ips200_y_max = 320;
   41          
   42          //-------------------------------------------------------------------------------------------------------
             -------------
   43          // å‡½æ•°ç®€ä»‹     IPS200 SPI å†™ 8bit æ•°æ®
   44          // å‚æ•°è¯´æ˜     data            æ•°æ®
   45          // è¿”å›å‚æ•°     void
   46          // ä½¿ç”¨ç¤ºä¾‹     ips200_write_8bit_data_spi(command);
   47          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨
   48          //-------------------------------------------------------------------------------------------------------
             -------------
   49          void ips200_write_8bit_data_spi(uint8 dat)    
   50          {
C251 COMPILER V5.60.0,  IPS200_SPI                                                         08/03/24  19:26:53  PAGE 2   

   51   1        spi_mosi(dat);
   52   1      
   53   1      }
   54          
   55          //-------------------------------------------------------------------------------------------------------
             -------------
   56          // å‡½æ•°ç®€ä»‹     IPS200 SPI å†™ 16bit æ•°æ®
   57          // å‚æ•°è¯´æ˜     data            æ•°æ®
   58          // è¿”å›å‚æ•°     void
   59          // ä½¿ç”¨ç¤ºä¾‹     ips200_write_16bit_data_spi(dat);
   60          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨
   61          //-------------------------------------------------------------------------------------------------------
             -------------
   62          void ips200_write_16bit_data_spi(uint16 dat)   
   63          {
   64   1          uint8 dat1[2];
   65   1          dat1[0] = dat >> 8;
   66   1          dat1[1] = (uint8)dat;
   67   1        
   68   1        spi_mosi(dat1[0]);  //å†™å…¥æ•°æ®  é«˜ä½åœ¨å‰  ä½ä½åœ¨å
   69   1        spi_mosi(dat1[1]);
   70   1      }
   71          
   72          
   73          //-------------------------------------------------------------------------------------------------------
             -------------
   74          // å‡½æ•°ç®€ä»‹     IPS200 å†™å‘½ä»¤
   75          // å‚æ•°è¯´æ˜     command         å‘½ä»¤
   76          // è¿”å›å‚æ•°     void
   77          // ä½¿ç”¨ç¤ºä¾‹     ips200_write_command(0x2a);
   78          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨ ç”¨æˆ·æ— éœ€å…³å¿ƒ
   79          //-------------------------------------------------------------------------------------------------------
             -------------
   80          static void ips200_write_command (const uint8 command)
   81          {
   82   1      
   83   1        IPS200_CS(1);
   84   1        IPS200_CS(0);
   85   1        IPS200_DC(0);
   86   1        ips200_write_8bit_data_spi(command);
   87   1        IPS200_DC(1);
   88   1        IPS200_CS(1);
   89   1        IPS200_CS(0);
   90   1      
   91   1      }
   92          
   93          //-------------------------------------------------------------------------------------------------------
             -------------
   94          // å‡½æ•°ç®€ä»‹     IPS200 å‘æ¶²æ™¶å±å†™ 8bit æ•°æ®
   95          // å‚æ•°è¯´æ˜     dat             æ•°æ®
   96          // è¿”å›å‚æ•°     void
   97          // ä½¿ç”¨ç¤ºä¾‹     ips200_write_8bit_data(0x0C);
   98          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨ ç”¨æˆ·æ— éœ€å…³å¿ƒ
   99          //-------------------------------------------------------------------------------------------------------
             -------------
  100          static void ips200_write_8bit_data (const uint8 dat)
  101          {
  102   1        IPS200_CS(0);
  103   1          IPS200_DC(1);
  104   1        ips200_write_8bit_data_spi(dat);
  105   1        IPS200_CS(1);
  106   1      }
  107          
  108          //-------------------------------------------------------------------------------------------------------
             -------------
  109          // å‡½æ•°ç®€ä»‹     IPS200 å‘æ¶²æ™¶å±å†™ 16bit æ•°æ®
C251 COMPILER V5.60.0,  IPS200_SPI                                                         08/03/24  19:26:53  PAGE 3   

  110          // å‚æ•°è¯´æ˜     dat             æ•°æ®
  111          // è¿”å›å‚æ•°     void
  112          // ä½¿ç”¨ç¤ºä¾‹     ips200_write_16bit_data(x1);
  113          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨ ç”¨æˆ·æ— éœ€å…³å¿ƒ
  114          //-------------------------------------------------------------------------------------------------------
             -------------
  115          static void ips200_write_16bit_data (const uint16 dat)
  116          {
  117   1        IPS200_CS(0);
  118   1          IPS200_DC(1);
  119   1        ips200_write_16bit_data_spi(dat);
  120   1        IPS200_CS(1);
  121   1      }
  122          
  123          //-------------------------------------------------------------------------------------------------------
             -------------
  124          // å‡½æ•°ç®€ä»‹     è®¾ç½®æ˜¾ç¤ºåŒºåŸŸ
  125          // å‚æ•°è¯´æ˜     x1              èµ·å§‹xè½´åæ ‡
  126          // å‚æ•°è¯´æ˜     y1              èµ·å§‹yè½´åæ ‡
  127          // å‚æ•°è¯´æ˜     x2              ç»“æŸxè½´åæ ‡
  128          // å‚æ•°è¯´æ˜     y2              ç»“æŸyè½´åæ ‡
  129          // è¿”å›å‚æ•°     void
  130          // ä½¿ç”¨ç¤ºä¾‹     ips200_set_region(0, 0, ips200_x_max - 1, ips200_y_max - 1);
  131          // å¤‡æ³¨ä¿¡æ¯     å†…éƒ¨è°ƒç”¨ ç”¨æˆ·æ— éœ€å…³å¿ƒ
  132          //-------------------------------------------------------------------------------------------------------
             -------------
  133          static void ips200_set_region (uint16 x1, uint16 y1, uint16 x2, uint16 y2)
  134          {
  135   1      
  136   1      
  137   1          ips200_write_command(0x2a);
  138   1          ips200_write_16bit_data(x1);
  139   1          ips200_write_16bit_data(x2);
  140   1          
  141   1          ips200_write_command(0x2b);
  142   1          ips200_write_16bit_data(y1);
  143   1          ips200_write_16bit_data(y2);
  144   1          
  145   1          ips200_write_command(0x2c);
  146   1      }
  147          
  148          
  149          //-------------------------------------------------------------------------------------------------------
             -------------
  150          // å‡½æ•°ç®€ä»‹     IPS200 æ¸…å±å‡½æ•°
  151          // å‚æ•°è¯´æ˜     void
  152          // è¿”å›å‚æ•°     void
  153          // ä½¿ç”¨ç¤ºä¾‹     ips200_clear();
  154          // å¤‡æ³¨ä¿¡æ¯     å°†å±å¹•æ¸…ç©ºæˆèƒŒæ™¯é¢œè‰²
  155          //-------------------------------------------------------------------------------------------------------
             -------------
  156          void ips200_clear (void)
  157          {
  158   1          uint16 i, j;
  159   1          IPS200_CS(0);
  160   1      
  161   1          ips200_set_region(0, 0, ips200_x_max - 1, ips200_y_max - 1);
  162   1          for(i = 0; i < ips200_x_max; i ++)
  163   1          {
  164   2              for (j = 0; j < ips200_y_max; j ++)
  165   2              {
  166   3                  ips200_write_16bit_data(ips200_bgcolor);                 
  167   3              }
  168   2          }
  169   1      
  170   1        IPS200_CS(1);
C251 COMPILER V5.60.0,  IPS200_SPI                                                         08/03/24  19:26:53  PAGE 4   

  171   1      
  172   1      }
  173          
  174          //-------------------------------------------------------------------------------------------------------
             -------------
  175          // å‡½æ•°ç®€ä»‹     IPS200 å±å¹•å¡«å……å‡½æ•°
  176          // å‚æ•°è¯´æ˜     color           é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ common_font.h å†… rgb565_color
             -_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  177          // è¿”å›å‚æ•°     void
  178          // ä½¿ç”¨ç¤ºä¾‹     ips200_full(RGB565_BLACK);
  179          // å¤‡æ³¨ä¿¡æ¯     å°†å±å¹•å¡«å……æˆæŒ‡å®šé¢œè‰²
  180          //-------------------------------------------------------------------------------------------------------
             -------------
  181          void ips200_full (const uint16 color)
  182          {
  183   1          uint16 i, j;
  184   1      
  185   1        IPS200_CS(0);
  186   1      
  187   1          ips200_set_region(0, 0, ips200_x_max - 1, ips200_y_max - 1);
  188   1          for(i = 0; i < ips200_x_max; i ++)
  189   1          {
  190   2              for (j = 0; j < ips200_y_max; j ++)
  191   2              {
  192   3                  ips200_write_16bit_data(color);                 
  193   3              }
  194   2          }
  195   1      
  196   1        IPS200_CS(1);
  197   1      
  198   1      }
  199          
  200          //-------------------------------------------------------------------------------------------------------
             -------------
  201          // å‡½æ•°ç®€ä»‹     è®¾ç½®æ˜¾ç¤ºæ–¹å‘
  202          // å‚æ•°è¯´æ˜     dir             æ˜¾ç¤ºæ–¹å‘  å‚ç…§ device_ips200.h å†… ips200_dir_enum æšä¸¾ä½“å®š
             -ä¹‰
  203          // è¿”å›å‚æ•°     void
  204          // ä½¿ç”¨ç¤ºä¾‹     ips200_set_dir(IPS200_PORTAIT);
  205          // å¤‡æ³¨ä¿¡æ¯     è¿™ä¸ªå‡½æ•°åªæœ‰åœ¨åˆå§‹åŒ–å±å¹•ä¹‹å‰è°ƒç”¨æ‰ç”Ÿæ•ˆ
  206          //-------------------------------------------------------------------------------------------------------
             -------------
  207          void ips200_set_dir (ips200_dir_enum dir)
  208          {
  209   1          ips200_display_dir = dir;
  210   1          if(dir < 2)
  211   1          {
  212   2              ips200_x_max = 240;
  213   2              ips200_y_max = 320;
  214   2          }
  215   1          else
  216   1          {
  217   2              ips200_x_max = 320;
  218   2              ips200_y_max = 240;
  219   2          }
  220   1      }
  221          
  222          //-------------------------------------------------------------------------------------------------------
             -------------
  223          // å‡½æ•°ç®€ä»‹     è®¾ç½®æ˜¾ç¤ºå­—ä½“
  224          // å‚æ•°è¯´æ˜     dir             æ˜¾ç¤ºæ–¹å‘  å‚ç…§ device_ips200.h å†… ips200_font_size_enum æšä¸¾
             -ä½“å®šä¹‰
  225          // è¿”å›å‚æ•°     void
  226          // ä½¿ç”¨ç¤ºä¾‹     ips200_set_font(IPS200_8x16_FONT);
  227          // å¤‡æ³¨ä¿¡æ¯     å­—ä½“å¯ä»¥éšæ—¶è‡ªç”±è®¾ç½® è®¾ç½®åç”Ÿæ•ˆ åç»­æ˜¾ç¤ºå°±æ˜¯æ–°çš„å­—ä½“å¤§å°
  228          //-------------------------------------------------------------------------------------------------------
C251 COMPILER V5.60.0,  IPS200_SPI                                                         08/03/24  19:26:53  PAGE 5   

             -------------
  229          void ips200_set_font (ips200_font_size_enum font)
  230          {
  231   1          ips200_display_font = font;
  232   1      }
  233          
  234          //-------------------------------------------------------------------------------------------------------
             -------------
  235          // å‡½æ•°ç®€ä»‹     è®¾ç½®æ˜¾ç¤ºé¢œè‰²
  236          // å‚æ•°è¯´æ˜     pen             é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ common_font.h å†… rgb565_color
             -_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  237          // å‚æ•°è¯´æ˜     bgcolor         é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ common_font.h å†… rgb565_color
             -_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  238          // è¿”å›å‚æ•°     void
  239          // ä½¿ç”¨ç¤ºä¾‹     ips200_set_color(RGB565_RED, RGB565_GRAY);
  240          // å¤‡æ³¨ä¿¡æ¯     å­—ä½“é¢œè‰²å’ŒèƒŒæ™¯é¢œè‰²ä¹Ÿå¯ä»¥éšæ—¶è‡ªç”±è®¾ç½® è®¾ç½®åç”Ÿæ•ˆ
  241          //-------------------------------------------------------------------------------------------------------
             -------------
  242          void ips200_set_color (const uint16 pen, const uint16 bgcolor)
  243          {
  244   1          ips200_pencolor = pen;
  245   1          ips200_bgcolor = bgcolor;
  246   1      }
  247          
  248          //-------------------------------------------------------------------------------------------------------
             -------------
  249          // å‡½æ•°ç®€ä»‹     IPS200 ç”»ç‚¹
  250          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ [0, ips200_x_max-1]
  251          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ [0, ips200_y_max-1]
  252          // å‚æ•°è¯´æ˜     color           é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ common_font.h å†… rgb565_color
             -_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  253          // è¿”å›å‚æ•°     void
  254          // ä½¿ç”¨ç¤ºä¾‹     ips200_draw_point(0, 0, RGB565_RED);            //åæ ‡0,0ç”»ä¸€ä¸ªçº¢è‰²çš„ç‚¹
  255          // å¤‡æ³¨ä¿¡æ¯
  256          //-------------------------------------------------------------------------------------------------------
             -------------
  257          void ips200_draw_point (uint16 x, uint16 y, const uint16 color)
  258          {
  259   1      
  260   1      
  261   1        IPS200_CS(0);
  262   1      
  263   1          ips200_set_region(x, y, x, y);
  264   1          ips200_write_16bit_data(color);
  265   1      
  266   1        IPS200_CS(1);
  267   1      
  268   1      }
  269          
  270          //-------------------------------------------------------------------------------------------------------
             -------------
  271          // å‡½æ•°ç®€ä»‹     IPS200 ç”»çº¿
  272          // å‚æ•°è¯´æ˜     x_start         åæ ‡xæ–¹å‘çš„èµ·ç‚¹ [0, ips200_x_max-1]
  273          // å‚æ•°è¯´æ˜     y_start         åæ ‡yæ–¹å‘çš„èµ·ç‚¹ [0, ips200_y_max-1]
  274          // å‚æ•°è¯´æ˜     x_end           åæ ‡xæ–¹å‘çš„ç»ˆç‚¹ [0, ips200_x_max-1]
  275          // å‚æ•°è¯´æ˜     y_end           åæ ‡yæ–¹å‘çš„ç»ˆç‚¹ [0, ips200_y_max-1]
  276          // å‚æ•°è¯´æ˜     color           é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ common_font.h å†… rgb565_color
             -_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  277          // è¿”å›å‚æ•°     void
  278          // ä½¿ç”¨ç¤ºä¾‹     ips200_draw_line(0, 0, 10, 10, RGB565_RED);     // åæ ‡ 0,0 åˆ° 10,10 ç”»ä¸€æ¡çº¢è
             -‰²çš„çº¿
  279          // å¤‡æ³¨ä¿¡æ¯
  280          //-------------------------------------------------------------------------------------------------------
             -------------
  281          void ips200_draw_line (uint16 x_start, uint16 y_start, uint16 x_end, uint16 y_end, const uint16 color)
  282          {
C251 COMPILER V5.60.0,  IPS200_SPI                                                         08/03/24  19:26:53  PAGE 6   

  283   1      
  284   1          int16 x_dir = (x_start < x_end ? 1 : -1);
  285   1          int16 y_dir = (y_start < y_end ? 1 : -1);
  286   1          float temp_rate = 0;
  287   1          float temp_b = 0;
  288   1      
  289   1          do
  290   1          {
  291   2              if(x_start != x_end)
  292   2              {
  293   3                  temp_rate = (float)(y_start - y_end) / (float)(x_start - x_end);
  294   3                  temp_b = (float)y_start - (float)x_start * temp_rate;
  295   3              }
  296   2              else
  297   2              {
  298   3                  while(y_start != y_end)
  299   3                  {
  300   4                      ips200_draw_point(x_start, y_start, color);
  301   4                      y_start += y_dir;
  302   4                  }
  303   3                  break;
  304   3              }
  305   2          
  306   2              if((func_abs(y_start - y_end)) > (func_abs(x_start - x_end)))
  307   2              {
  308   3                  while(y_start != y_end)
  309   3                  {
  310   4                      ips200_draw_point(x_start, y_start, color);
  311   4                      y_start += y_dir;
  312   4                      x_start = (int16)(((float)y_start - temp_b) / temp_rate);
  313   4                  }
  314   3              }
  315   2              else
  316   2              {
  317   3                  while(x_start != x_end)
  318   3                  {
  319   4                      ips200_draw_point(x_start, y_start, color);
  320   4                      x_start += x_dir;
  321   4                      y_start = (int16)((float)x_start * temp_rate + temp_b);
  322   4                  }
  323   3              }
  324   2          }while(0);
  325   1      }
  326          
  327          //-------------------------------------------------------------------------------------------------------
             -------------
  328          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤ºå­—ç¬¦
  329          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  330          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  331          // å‚æ•°è¯´æ˜     dat             éœ€è¦æ˜¾ç¤ºçš„å­—ç¬¦
  332          // è¿”å›å‚æ•°     void
  333          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_char(0, 0, 'x');                     // åæ ‡0,0å†™ä¸€ä¸ªå­—ç¬¦x
  334          // å¤‡æ³¨ä¿¡æ¯
  335          //-------------------------------------------------------------------------------------------------------
             -------------
  336          void ips200_show_char (uint16 x, uint16 y, const char dat)
  337          {
  338   1          uint8 i, j;
  339   1        uint8 temp_top;
  340   1        uint8 temp_bottom;
  341   1      
  342   1        IPS200_CS(0);
  343   1      
  344   1          switch(ips200_display_font)
  345   1          {
  346   2              case IPS200_6X8_FONT:
C251 COMPILER V5.60.0,  IPS200_SPI                                                         08/03/24  19:26:53  PAGE 7   

  347   2                  for(i = 0; i < 6; i ++)
  348   2                  {
  349   3                      ips200_set_region(x + i, y, x + i, y + 8);
  350   3                      // å‡ 32 å› ä¸ºæ˜¯å–æ¨¡æ˜¯ä»ç©ºæ ¼å¼€å§‹å–å¾— ç©ºæ ¼åœ¨ ascii ä¸­åºå·æ˜¯ 32
  351   3                      temp_top = ascii_font_6x8[dat - 32][i];
  352   3                      for(j = 0; j < 8; j ++)
  353   3                      {
  354   4                          if(temp_top & 0x01)
  355   4                          {
  356   5                              ips200_write_16bit_data(ips200_pencolor);
  357   5                          }
  358   4                          else
  359   4                          {
  360   5                              ips200_write_16bit_data(ips200_bgcolor);
  361   5                          }
  362   4                          temp_top >>= 1;
  363   4                      }
  364   3                  }
  365   2                  break;
  366   2              case IPS200_8X16_FONT:
  367   2                  for(i = 0; i < 8; i ++)
  368   2                  {
  369   3                      ips200_set_region(x + i, y, x + i, y + 15);
  370   3                      // å‡ 32 å› ä¸ºæ˜¯å–æ¨¡æ˜¯ä»ç©ºæ ¼å¼€å§‹å–å¾— ç©ºæ ¼åœ¨ ascii ä¸­åºå·æ˜¯ 32
  371   3                      temp_top = ascii_font_8x16[dat - 32][i];
  372   3                      temp_bottom = ascii_font_8x16[dat - 32][i + 8];
  373   3                      for(j = 0; j < 8; j ++)
  374   3                      {
  375   4                          if(temp_top & 0x01)
  376   4                          {
  377   5                              ips200_write_16bit_data(ips200_pencolor);
  378   5                          }
  379   4                          else
  380   4                          {
  381   5                              ips200_write_16bit_data(ips200_bgcolor);
  382   5                          }
  383   4                          temp_top >>= 1;
  384   4                      }
  385   3                      for(j = 0; j < 8; j ++)
  386   3                      {
  387   4                          if(temp_bottom & 0x01)
  388   4                          {
  389   5                              ips200_write_16bit_data(ips200_pencolor);
  390   5                          }
  391   4                          else
  392   4                          {
  393   5                              ips200_write_16bit_data(ips200_bgcolor);
  394   5                          }
  395   4                          temp_bottom >>= 1;
  396   4                      }
  397   3                  }
  398   2                  break;
  399   2              case IPS200_16X16_FONT:
  400   2                  // æš‚ä¸æ”¯æŒ
  401   2                  break;
  402   2          }
  403   1      
  404   1        IPS200_CS(1);
  405   1      
  406   1      }
  407          
  408          //-------------------------------------------------------------------------------------------------------
             -------------
  409          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤ºå­—ç¬¦ä¸²
  410          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  411          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
C251 COMPILER V5.60.0,  IPS200_SPI                                                         08/03/24  19:26:53  PAGE 8   

  412          // å‚æ•°è¯´æ˜     dat             éœ€è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²
  413          // è¿”å›å‚æ•°     void
  414          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_string(0, 0, "seekfree");
  415          // å¤‡æ³¨ä¿¡æ¯
  416          //-------------------------------------------------------------------------------------------------------
             -------------
  417          void ips200_show_string (uint16 x, uint16 y, const char dat[])
  418          {
  419   1      
  420   1          uint16 j = 0;
  421   1          while(dat[j] != '\0')
  422   1          {
  423   2              switch(ips200_display_font)
  424   2              {
  425   3                  case IPS200_6X8_FONT:
  426   3                      ips200_show_char(x + 6 * j, y, dat[j]);
  427   3                      j ++;
  428   3                      break;
  429   3                  case IPS200_8X16_FONT:
  430   3                      ips200_show_char(x + 8 * j, y, dat[j]);
  431   3                      j ++;
  432   3                      break;
  433   3                  case IPS200_16X16_FONT:
  434   3                      // æš‚ä¸æ”¯æŒ
  435   3                      break;
  436   3              }
  437   2          }
  438   1      }
  439          
  440          //-------------------------------------------------------------------------------------------------------
             -------------
  441          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤º32ä½æœ‰ç¬¦å· (å»é™¤æ•´æ•°éƒ¨åˆ†æ— æ•ˆçš„0)
  442          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  443          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  444          // å‚æ•°è¯´æ˜     dat             éœ€è¦æ˜¾ç¤ºçš„å˜é‡ æ•°æ®ç±»å‹ int32
  445          // å‚æ•°è¯´æ˜     num             éœ€è¦æ˜¾ç¤ºçš„ä½æ•° æœ€é«˜10ä½  ä¸åŒ…å«æ­£è´Ÿå·
  446          // è¿”å›å‚æ•°     void
  447          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_int(0, 0, x, 3);                    // x å¯ä»¥ä¸º int32 int16 int8 ç±»å
             -‹
  448          // å¤‡æ³¨ä¿¡æ¯     è´Ÿæ•°ä¼šæ˜¾ç¤ºä¸€ä¸ª â€˜-â€™å·   æ­£æ•°æ˜¾ç¤ºä¸€ä¸ªç©ºæ ¼
  449          //-------------------------------------------------------------------------------------------------------
             -------------
  450          void ips200_show_int (uint16 x, uint16 y, const int32 dat, uint8 num)
  451          {
  452   1      
  453   1      
  454   1          int32 dat_temp = dat;
  455   1          int32 offset = 1;
  456   1          char data_buffer[12];
  457   1      
  458   1          memset(data_buffer, 0, 12);
  459   1          memset(data_buffer, ' ', num+1);
  460   1      
  461   1          if(num < 10)
  462   1          {
  463   2              for(; num > 0; num --)
  464   2              {
  465   3                  offset *= 10;
  466   3              }
  467   2              dat_temp %= offset;
  468   2          }
  469   1          func_int_to_str(data_buffer, dat_temp);
  470   1          ips200_show_string(x, y, (const char *)&data_buffer);
  471   1      }
  472          
  473          //-------------------------------------------------------------------------------------------------------
C251 COMPILER V5.60.0,  IPS200_SPI                                                         08/03/24  19:26:53  PAGE 9   

             -------------
  474          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤º32ä½æ— ç¬¦å· (å»é™¤æ•´æ•°éƒ¨åˆ†æ— æ•ˆçš„0)
  475          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, IPS200_x_max-1]
  476          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, IPS200_y_max-1]
  477          // å‚æ•°è¯´æ˜     dat             éœ€è¦æ˜¾ç¤ºçš„å˜é‡ æ•°æ®ç±»å‹ uint32
  478          // å‚æ•°è¯´æ˜     num             éœ€è¦æ˜¾ç¤ºçš„ä½æ•° æœ€é«˜10ä½  ä¸åŒ…å«æ­£è´Ÿå·
  479          // è¿”å›å‚æ•°     void
  480          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_uint(0, 0, x, 3);                   // x å¯ä»¥ä¸º uint32 uint16 uint8 ç±
             -»å‹
  481          // å¤‡æ³¨ä¿¡æ¯
  482          //-------------------------------------------------------------------------------------------------------
             -------------
  483          void ips200_show_uint (uint16 x, uint16 y, const uint32 dat, uint8 num)
  484          {
  485   1          uint32 dat_temp = dat;
  486   1          int32 offset = 1;
  487   1          char data_buffer[12];
  488   1          memset(data_buffer, 0, 12);
  489   1          memset(data_buffer, ' ', num);
  490   1      
  491   1          if(num < 10)
  492   1          {
  493   2              for(; num > 0; num --)
  494   2              {
  495   3                  offset *= 10;
  496   3              }
  497   2              dat_temp %= offset;
  498   2          }
  499   1          func_uint_to_str(data_buffer, dat_temp);
  500   1          ips200_show_string(x, y, (const char *)&data_buffer);
  501   1      }
  502          
  503          //-------------------------------------------------------------------------------------------------------
             -------------
  504          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤ºæµ®ç‚¹æ•°(å»é™¤æ•´æ•°éƒ¨åˆ†æ— æ•ˆçš„0)
  505          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  506          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  507          // å‚æ•°è¯´æ˜     dat             éœ€è¦æ˜¾ç¤ºçš„å˜é‡ï¼Œæ•°æ®ç±»å‹floatæˆ–double
  508          // å‚æ•°è¯´æ˜     num             æ•´æ•°ä½æ˜¾ç¤ºé•¿åº¦   æœ€é«˜8ä½
  509          // å‚æ•°è¯´æ˜     pointnum        å°æ•°ä½æ˜¾ç¤ºé•¿åº¦   æœ€é«˜6ä½
  510          // è¿”å›å‚æ•°     void
  511          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_float(0, 0, x, 2, 3);               // æ˜¾ç¤ºæµ®ç‚¹æ•°   æ•´æ•°æ˜¾ç¤º2ä½
             -   å°æ•°æ˜¾ç¤ºä¸‰ä½
  512          // å¤‡æ³¨ä¿¡æ¯     ç‰¹åˆ«æ³¨æ„å½“å‘ç°å°æ•°éƒ¨åˆ†æ˜¾ç¤ºçš„å€¼ä¸ä½ å†™å…¥çš„å€¼ä¸ä¸€æ ·çš„æ—¶å€™ï¼Œ
  513          //              å¯èƒ½æ˜¯ç”±äºæµ®ç‚¹æ•°ç²¾åº¦ä¸¢å¤±é—®é¢˜å¯¼è‡´çš„ï¼Œè¿™å¹¶ä¸æ˜¯æ˜¾ç¤ºå‡½æ•°çš„é—®é¢˜ï¼
             -Œ
  514          //              æœ‰å…³é—®é¢˜çš„è¯¦æƒ…ï¼Œè¯·è‡ªè¡Œç™¾åº¦å­¦ä¹    æµ®ç‚¹æ•°ç²¾åº¦ä¸¢å¤±é—®é¢˜ã€‚
  515          //              è´Ÿæ•°ä¼šæ˜¾ç¤ºä¸€ä¸ª â€˜-â€™å·   æ­£æ•°æ˜¾ç¤ºä¸€ä¸ªç©ºæ ¼
  516          //-------------------------------------------------------------------------------------------------------
             -------------
  517          void ips200_show_float (uint16 x, uint16 y, const double dat, uint8 num, uint8 pointnum)
  518          {
  519   1      
  520   1          double dat_temp = dat;
  521   1          double offset = 1.0;
  522   1          char data_buffer[17];
  523   1          memset(data_buffer, 0, 17);
  524   1          memset(data_buffer, ' ', num+pointnum+2);
  525   1      
  526   1          if(num < 10)
  527   1          {
  528   2              for(; num > 0; num --)
  529   2              {
  530   3                  offset *= 10;
  531   3              }
  532   2              dat_temp = dat_temp - ((int)dat_temp / (int)offset) * offset;
C251 COMPILER V5.60.0,  IPS200_SPI                                                         08/03/24  19:26:53  PAGE 10  

  533   2          }
  534   1          func_double_to_str(data_buffer, dat_temp, pointnum);
  535   1          ips200_show_string(x, y, data_buffer);
  536   1      }
  537          
  538          
  539          
  540          
  541          //-------------------------------------------------------------------------------------------------------
             -------------
  542          // å‡½æ•°ç®€ä»‹     IPS200 æ˜¾ç¤ºæ³¢å½¢
  543          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  544          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  545          // å‚æ•°è¯´æ˜     *wave           æ³¢å½¢æ•°ç»„æŒ‡é’ˆ
  546          // å‚æ•°è¯´æ˜     width           æ³¢å½¢å®é™…å®½åº¦
  547          // å‚æ•°è¯´æ˜     value_max       æ³¢å½¢å®é™…æœ€å¤§å€¼
  548          // å‚æ•°è¯´æ˜     dis_width       æ³¢å½¢æ˜¾ç¤ºå®½åº¦ å‚æ•°èŒƒå›´ [0, ips200_x_max]
  549          // å‚æ•°è¯´æ˜     dis_value_max   æ³¢å½¢æ˜¾ç¤ºæœ€å¤§å€¼ å‚æ•°èŒƒå›´ [0, ips200_y_max]
  550          // è¿”å›å‚æ•°     void
  551          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_wave(0, 0, data, 128, 64, 64, 32);
  552          // å¤‡æ³¨ä¿¡æ¯
  553          //-------------------------------------------------------------------------------------------------------
             -------------
  554          void ips200_show_wave (uint16 x, uint16 y, const uint16 *wave, uint16 width, uint16 value_max, uint16 dis
             -_width, uint16 dis_value_max)
  555          {
  556   1      
  557   1          uint32 i = 0, j = 0;
  558   1          uint32 width_index = 0, value_max_index = 0;
  559   1      
  560   1      
  561   1        IPS200_CS(0);
  562   1      
  563   1          ips200_set_region(x, y, x + dis_width - 1, y + dis_value_max - 1);          // è®¾ç½®æ˜¾ç¤ºåŒºåŸŸ
  564   1          for(i = 0; i < dis_value_max; i ++)
  565   1          {
  566   2              for(j = 0; j < dis_width; j ++)
  567   2              {
  568   3                  ips200_write_16bit_data(ips200_bgcolor); 
  569   3              }
  570   2          }
  571   1      
  572   1        IPS200_CS(1);
  573   1      
  574   1      
  575   1          for(i = 0; i < dis_width; i ++)
  576   1          {
  577   2              width_index = i * width / dis_width;
  578   2              value_max_index = *(wave + width_index) * (dis_value_max - 1) / value_max;
  579   2              ips200_draw_point(i + x, (dis_value_max - 1) - value_max_index + y, ips200_pencolor);
  580   2          }
  581   1      }
  582          
  583          //-------------------------------------------------------------------------------------------------------
             -------------
  584          // å‡½æ•°ç®€ä»‹     æ±‰å­—æ˜¾ç¤º
  585          // å‚æ•°è¯´æ˜     x               åæ ‡xæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_x_max-1]
  586          // å‚æ•°è¯´æ˜     y               åæ ‡yæ–¹å‘çš„èµ·ç‚¹ å‚æ•°èŒƒå›´ [0, ips200_y_max-1]
  587          // å‚æ•°è¯´æ˜     size            å–æ¨¡çš„æ—¶å€™è®¾ç½®çš„æ±‰å­—å­—ä½“å¤§å° ä¹Ÿå°±æ˜¯ä¸€ä¸ªæ±‰å­—å ç”
             -¨çš„ç‚¹é˜µé•¿å®½ä¸ºå¤šå°‘ä¸ªç‚¹ å–æ¨¡çš„æ—¶å€™éœ€è¦é•¿å®½æ˜¯ä¸€æ ·çš„
  588          // å‚æ•°è¯´æ˜     *chinese_buffer éœ€è¦æ˜¾ç¤ºçš„æ±‰å­—æ•°ç»„
  589          // å‚æ•°è¯´æ˜     number          éœ€è¦æ˜¾ç¤ºå¤šå°‘ä½
  590          // å‚æ•°è¯´æ˜     color           é¢œè‰²æ ¼å¼ RGB565 æˆ–è€…å¯ä»¥ä½¿ç”¨ common_font.h å†… rgb565_color
             -_enum æšä¸¾å€¼æˆ–è€…è‡ªè¡Œå†™å…¥
  591          // è¿”å›å‚æ•°     void
  592          // ä½¿ç”¨ç¤ºä¾‹     ips200_show_chinese(0, 0, 16, chinese_test[0], 4, RGB565_RED);//æ˜¾ç¤ºfontæ–‡ä»¶é‡Œé
C251 COMPILER V5.60.0,  IPS200_SPI                                                         08/03/24  19:26:53  PAGE 11  

             -¢çš„ ç¤ºä¾‹
  593          // å¤‡æ³¨ä¿¡æ¯     ä½¿ç”¨PCtoLCD2002è½¯ä»¶å–æ¨¡           é˜´ç ã€é€è¡Œå¼ã€é¡ºå‘   16*16
  594          //-------------------------------------------------------------------------------------------------------
             -------------
  595          void ips200_show_chinese (uint16 x, uint16 y, uint8 size, const uint8 *chinese_buffer, uint8 number, cons
             -t uint16 color)
  596          {
  597   1      
  598   1      
  599   1          int i, j, k;
  600   1          uint8 temp, temp1, temp2;
  601   1          const uint8 *p_data;
  602   1          
  603   1          temp2 = size / 8;
  604   1          
  605   1      
  606   1        IPS200_CS(0);
  607   1      
  608   1          ips200_set_region(x, y, number * size - 1 + x, y + size - 1);
  609   1          
  610   1          for(i = 0; i < size; i ++)
  611   1          {
  612   2              temp1 = number;
  613   2              p_data = chinese_buffer + i * temp2;
  614   2              while(temp1 --)
  615   2              {
  616   3                  for(k = 0; k < temp2; k ++)
  617   3                  {
  618   4                      for(j = 8; j > 0; j --)
  619   4                      {
  620   5                          temp = (*p_data >> (j - 1)) & 0x01;
  621   5                          if(temp)
  622   5                          {
  623   6                              ips200_write_16bit_data(color);
  624   6                          }
  625   5                          else
  626   5                          {
  627   6                              ips200_write_16bit_data(ips200_bgcolor);
  628   6                          }
  629   5                      }
  630   4                      p_data ++;
  631   4                  }
  632   3                  p_data = p_data - temp2 + temp2 * size;
  633   3              }   
  634   2          }
  635   1      
  636   1        IPS200_CS(1);
  637   1      
  638   1      }
  639          
  640          //-------------------------------------------------------------------------------------------------------
             -------------
  641          // å‡½æ•°ç®€ä»‹     2å¯¸ IPSæ¶²æ™¶åˆå§‹åŒ–
  642          // å‚æ•°è¯´æ˜     type_select     ä¸¤å¯¸å±æ¥å£ç±»å‹ IPS200_TYPE_SPI ä¸º SPI æ¥å£ä¸²å£ä¸¤å¯¸å± I
             -PS200_TYPE_PARALLEL8 ä¸º 8080 åè®®å…«ä½å¹¶å£ä¸¤å¯¸å±
  643          // è¿”å›å‚æ•°     void
  644          // ä½¿ç”¨ç¤ºä¾‹     ips200_init(IPS200_TYPE_PARALLEL8);
  645          // å¤‡æ³¨ä¿¡æ¯
  646          //-------------------------------------------------------------------------------------------------------
             -------------
  647          void ips200_init_spi ()
  648          {
  649   1        IPS200_BL(1);
  650   1        IPS200_DC(0);
  651   1        IPS200_RST(0);
  652   1        
C251 COMPILER V5.60.0,  IPS200_SPI                                                         08/03/24  19:26:53  PAGE 12  

  653   1      
  654   1        spi_init(IPS200_SPIN_PIN, IPS200_SCL_PIN, IPS200_SDA_PIN, IPS200_SDA_IN_PIN, 0, MASTER, SPI_SYSclk_DIV_2
             -);
  655   1      
  656   1      
  657   1        
  658   1      
  659   1          ips200_set_dir(ips200_display_dir);
  660   1          ips200_set_color(ips200_pencolor, ips200_bgcolor);
  661   1      
  662   1          
  663   1          IPS200_BL(1);
  664   1          IPS200_RST(0);  
  665   1          delay_ms(5);
  666   1          IPS200_RST(1);      
  667   1          delay_ms(120);
  668   1          
  669   1      
  670   1        IPS200_CS(0);
  671   1      
  672   1          ips200_write_command(0x11);
  673   1          delay_ms(120);
  674   1      
  675   1          ips200_write_command(0x36);
  676   1          if(ips200_display_dir == 0)
  677   1          {
  678   2              ips200_write_8bit_data(0x00);
  679   2          }
  680   1          else if(ips200_display_dir == 1)
  681   1          {
  682   2              ips200_write_8bit_data(0xC0);
  683   2          }
  684   1          else if(ips200_display_dir == 2)
  685   1          {
  686   2              ips200_write_8bit_data(0x70);
  687   2          }
  688   1          else
  689   1          {
  690   2              ips200_write_8bit_data(0xA0);
  691   2          }
  692   1      
  693   1          ips200_write_command(0x3A);            
  694   1          ips200_write_8bit_data(0x05);
  695   1          
  696   1          ips200_write_command(0xB2);            
  697   1          ips200_write_8bit_data(0x0C);
  698   1          ips200_write_8bit_data(0x0C); 
  699   1          ips200_write_8bit_data(0x00); 
  700   1          ips200_write_8bit_data(0x33); 
  701   1          ips200_write_8bit_data(0x33);           
  702   1      
  703   1          ips200_write_command(0xB7);            
  704   1          ips200_write_8bit_data(0x35);
  705   1      
  706   1          ips200_write_command(0xBB);            
  707   1          ips200_write_8bit_data(0x29);                                               // 32 Vcom=1.35V
  708   1                                                                  
  709   1          ips200_write_command(0xC2);            
  710   1          ips200_write_8bit_data(0x01);
  711   1      
  712   1          ips200_write_command(0xC3);            
  713   1          ips200_write_8bit_data(0x19);                                               // GVDD=4.8V 
  714   1                                                                  
  715   1          ips200_write_command(0xC4);            
  716   1          ips200_write_8bit_data(0x20);                                               // VDV, 0x20:0v
  717   1      
C251 COMPILER V5.60.0,  IPS200_SPI                                                         08/03/24  19:26:53  PAGE 13  

  718   1          ips200_write_command(0xC5);            
  719   1          ips200_write_8bit_data(0x1A);                                               // VCOM Offset Set
  720   1      
  721   1          ips200_write_command(0xC6);            
  722   1          ips200_write_8bit_data(0x01F);                                              // 0x0F:60Hz          
  723   1      
  724   1          ips200_write_command(0xD0);            
  725   1          ips200_write_8bit_data(0xA4);
  726   1          ips200_write_8bit_data(0xA1);                                                                        
             -                                                                                                                   
  727   1                      
  728   1          ips200_write_command(0xE0);     
  729   1          ips200_write_8bit_data(0xD0);   
  730   1          ips200_write_8bit_data(0x08);   
  731   1          ips200_write_8bit_data(0x0E);   
  732   1          ips200_write_8bit_data(0x09);   
  733   1          ips200_write_8bit_data(0x09);   
  734   1          ips200_write_8bit_data(0x05);   
  735   1          ips200_write_8bit_data(0x31);   
  736   1          ips200_write_8bit_data(0x33);   
  737   1          ips200_write_8bit_data(0x48);   
  738   1          ips200_write_8bit_data(0x17);   
  739   1          ips200_write_8bit_data(0x14);   
  740   1          ips200_write_8bit_data(0x15);   
  741   1          ips200_write_8bit_data(0x31);   
  742   1          ips200_write_8bit_data(0x34);   
  743   1      
  744   1          ips200_write_command(0xE1);     
  745   1          ips200_write_8bit_data(0xD0);   
  746   1          ips200_write_8bit_data(0x08);   
  747   1          ips200_write_8bit_data(0x0E);   
  748   1          ips200_write_8bit_data(0x09);   
  749   1          ips200_write_8bit_data(0x09); 
  750   1          ips200_write_8bit_data(0x15);   
  751   1          ips200_write_8bit_data(0x31);   
  752   1          ips200_write_8bit_data(0x33);   
  753   1          ips200_write_8bit_data(0x48);   
  754   1          ips200_write_8bit_data(0x17);   
  755   1          ips200_write_8bit_data(0x14);   
  756   1          ips200_write_8bit_data(0x15);   
  757   1          ips200_write_8bit_data(0x31);   
  758   1          ips200_write_8bit_data(0x34);   
  759   1      
  760   1          ips200_write_command(0x21);
  761   1          
  762   1          ips200_write_command(0x29);
  763   1      
  764   1        IPS200_CS(1);
  765   1      
  766   1      
  767   1          ips200_clear();                                                             // åˆå§‹åŒ–ä¸ºç™½å±
  768   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =      2455     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =        14        154
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
C251 COMPILER V5.60.0,  IPS200_SPI                                                         08/03/24  19:26:53  PAGE 14  

  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        42     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
